---
title: "Stopped learning English"
format:
  html:
    toc: true
    number-sections: false
---

Based on our survey results, we categorize respondents into three groups:

- Stopped at least once
- Explicitly never stopped
- No data

```{python}
import pandas as pd
import re

df = pd.read_csv('../data/form_data.csv')
N = len(df)

text = df['obstacles'] if 'obstacles' in df.columns else pd.Series([None] * N)

# Basic heuristic: contains 'never' (English) or 'ніколи' (Ukrainian)
never_mask = text.fillna('').astype(str).str.lower().str.contains('never|ніколи')
stopped_mask = text.notna() & text.astype(str).str.strip().ne('') & (~never_mask)
unknown_mask = (~stopped_mask) & (~never_mask)

count_stopped = int(stopped_mask.sum())
count_never = int(never_mask.sum())
count_unknown = int(unknown_mask.sum())

count_stopped, count_never, count_unknown, N
```

Using the current data snapshot, the counts are shown below.

```{python}
print(f"Stopped at least once: {count_stopped}")
print(f"Explicitly never stopped: {count_never}")
print(f"No data: {count_unknown}")
```

In our data, {count_stopped} out of {N} respondents have indicated stopping at least once, and {count_never} respondents stated they have never stopped. The remaining {count_unknown} provided no information.

### Respondent IDs per group

```{python}
ids_stopped = df.loc[stopped_mask, 'respondent_id'].tolist()
ids_never = df.loc[never_mask, 'respondent_id'].tolist()
ids_unknown = df.loc[unknown_mask, 'respondent_id'].tolist()

print('Stopped IDs:', ids_stopped)
print('Never IDs:', ids_never)
print('No-data IDs:', ids_unknown)
```

### Pie chart

```{python}
import matplotlib.pyplot as plt

labels = ['Stopped', 'Never', 'No data']
sizes = [count_stopped, count_never, count_unknown]
colors = ['#ff9999','#99ff99','#dddddd']

fig, ax = plt.subplots(figsize=(6, 6))
ax.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90, colors=colors)
ax.axis('equal')
plt.show()
```

### Examples: respondents who stopped at least once

```{python}
examples_stopped = df.loc[stopped_mask, 'obstacles'].dropna().astype(str).head(3).tolist()
for ex in examples_stopped:
    print(f"- \"{ex}\"")
```

### Examples: respondents who never stopped

```{python}
examples_never = df.loc[never_mask, 'obstacles'].dropna().astype(str).head(3).tolist()
for ex in examples_never:
    print(f"- \"{ex}\"")
```


