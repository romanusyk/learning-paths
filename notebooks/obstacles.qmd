---
title: "The Plateau: Why We Stop Learning"
format:
  html:
    toc: false
    number-sections: false
    code-fold: true
    page-layout: full
---

> "I stopped because I was foolish." — *Survey Respondent*

According to our survey, **44 out of 102 respondents** stopped learning English at least once. While taking a break is common, extensive research confirms that long pauses lead to "language attrition"—where skills, especially vocabulary, decline over time.

This page explores the main obstacles that cause these pauses, from the "lack of need" to the lasting impact of poor teaching in school.

```{python}
import pandas as pd
import json
from collections import Counter, defaultdict
import matplotlib.pyplot as plt

df = pd.read_csv('../data/form_data.csv')
obs_df = pd.read_csv('../data/obstacles.csv')
with open('../data/obstacles_map.json', 'r', encoding='utf-8') as f:
    mapping = json.load(f)

# Count how often each label appears
label_counts = Counter()
for row in mapping:
    for label in row.get('labels', []):
        label_counts[label] += 1

total_with_answer = len({row['respondent_id'] for row in mapping})
count_never = label_counts.get('Never', 0)
count_stopped = total_with_answer - count_never
count_unknown = len(df) - total_with_answer

# Create pie chart for learning status distribution
labels = ['Stopped at least once', 'Never stopped', 'No data']
sizes = [count_stopped, count_never, count_unknown]
colors = ['#ff7f7f', '#90ee90', '#d3d3d3']

fig, ax = plt.subplots(figsize=(8, 6))
wedges, texts, autotexts = ax.pie(sizes, labels=labels, colors=colors, autopct='%1.0f%%', 
                                  startangle=90, textprops={'fontsize': 12})

# Make the percentage text bold
for autotext in autotexts:
    autotext.set_weight('bold')
    autotext.set_color('black')

ax.set_title('How many respondents have ever stopped learning?', fontsize=14, fontweight='bold', pad=20)

# Add legend with counts
legend_labels = [f'{label}: {size}' for label, size in zip(labels, sizes)]
ax.legend(wedges, legend_labels, loc="upper left", bbox_to_anchor=(1, 0, 0.5, 1))

plt.tight_layout()
plt.show()
```

### Most Common Obstacles

The chart below shows obstacles ranked by how many respondents mentioned them. Each obstacle category groups similar responses identified by the LLM.

```{python}
import matplotlib.pyplot as plt

# Exclude 'Never' from ranking of obstacles
obstacle_counts = {k: v for k, v in label_counts.items() if k != 'Never'}
ranked = sorted(obstacle_counts.items(), key=lambda kv: kv[1], reverse=True)

fig, ax = plt.subplots(figsize=(9, max(3, len(ranked)*0.4)))
ax.barh([k for k, _ in reversed(ranked)], [v for _, v in reversed(ranked)], color='#5B8FF9')
ax.set_xlabel('Number of respondents')
ax.set_title('How many respondents mentioned this obstacle?')
plt.tight_layout()
plt.show()
```

The table below shows each obstacle with how many respondents mentioned it, plus a detailed explanation of common themes in their answers.

```{python}
# Display the ordered table with explanations (show full text, no truncation, no index column)
from IPython.display import display, HTML

explain_map = {r['obstacle']: r.get('explanation', '') for r in obs_df.to_dict(orient='records')}
rows = [
    {'obstacle': name, 'count': cnt, 'explanation': explain_map.get(name, '')}
    for name, cnt in ranked
]
table_df = pd.DataFrame(rows)

with pd.option_context('display.max_colwidth', None):
    html = table_df.to_html(index=False)
    display(HTML(html))
```

### Interactive: All Responses with English Translations

The table below shows every respondent's answer about obstacles, together with the obstacle labels assigned to it. Use the buttons to filter by obstacle and switch between original and English text.

```{python}
#| echo: false
#| results: asis
import sys, os
from IPython.display import HTML, display
sys.path.append(os.path.abspath('..'))
from src.ui.data_tables.examples_table import render_examples_block

html_block = render_examples_block(
    table_id='obstacles-examples-table',
    form_csv='../data/form_data.csv',
    obstacles_eng_csv='../data/obstacles_eng.csv',
    map_json='../data/obstacles_map.json',
)
display(HTML(html_block))
```


